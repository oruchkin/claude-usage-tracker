#!/bin/bash

# --- –ù–ê–°–¢–†–û–ô–ö–ò ---
GITLAB_REPO_URL="https://gitlab.oleg.press/react-apps/claude-usage-tracker"
REMOTE_NAME="gitlab"
BRANCH="main"

echo "üöÄ –ó–∞–ø—É—Å–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (Force Push to GitLab)..."

# 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º remote
if ! git remote | grep -q "^${REMOTE_NAME}$"; then
  echo "‚öôÔ∏è  –î–æ–±–∞–≤–ª—è—é gitlab remote..."
  git remote add $REMOTE_NAME $GITLAB_REPO_URL
fi

# 2. –ü—É—à–∏–º —Å —Ñ–ª–∞–≥–æ–º --force (–ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é –≤ GitLab)
echo "üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–¥–∞ –≤ GitLab..."

# –î–æ–±–∞–≤–∏–ª–∏ --force, —á—Ç–æ–±—ã —Ä–µ—à–∏—Ç—å –æ—à–∏–±–∫—É "[rejected]"
git push --force $REMOTE_NAME $BRANCH

echo "‚úÖ –£—Å–ø–µ—à–Ω–æ! –ü–∞–π–ø–ª–∞–π–Ω –≤ GitLab –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è."